# 📰 FeedFlow — Jetpack Compose 动态卡片流客户端

**FeedFlow** 是一个基于 **Jetpack Compose** 构建的现代化 Android Feed 流客户端 App。它完全由服务端驱动，支持动态卡片样式、混排布局、精准曝光追踪，并集成了本地缓存，视频播放模拟，插件化架构等进阶能力。


---

## 📁 项目架构
| 路径 | 说明 |
|------|------|
| `core/` | 核心模块，包含项目通用组件，如依赖注入、工具类、异常处理等。 |
| `    core/di/` | 依赖注入相关代码。 |
| `    core/util/` | 通用工具类，例如网络请求工具、日志、时间处理等。 |
| `    core/exception/` | 自定义异常类及异常处理逻辑。 |
| `data/` | 数据层，负责数据的获取、存储与管理。 |
| `    data/repository/` | 本地模拟数据仓库（Repository），作为业务层与数据源之间的桥梁。 |
| `    data/remote/` | 远程数据源。 |
| `    data/local/` | 本地数据源。 |
| `domain/` | 领域层，定义业务逻辑的核心模型与用例，独立于 UI 和数据源。 |
| `    domain/model/` | 数据模型（Data Model），表示领域对象（不包含 UI 或数据源细节）。 |
| `    domain/usecase/` | 业务用例（Use Case），封装具体业务逻辑（获取用户、更新状态等）。 |
| `ui/` | 用户界面层，负责展示和交互。 |
| `    ui/components/` | 可复用的 UI 组件（如按钮、卡片、列表项等）。 |
| `    ui/screens/` | 屏幕组件（页面），主界面、详情页等。 |
| `    ui/theme/` | 主题样式（颜色、字体、形状等主题配置）。 |
| `    ui/utils/` | UI 层专用工具类（状态管理、动画、导航辅助等）。 |
| `viewmodel/` | ViewModel 层，连接 UI 与 Domain 层，负责数据准备和状态管理。 |

---

## ✨ 核心功能

- **服务端驱动内容**  
  所有卡片数据（类型、文本、图片 URL、排版方式等）均由（模拟）服务端下发，前端通过 `sealed class` + `@Composable` 动态渲染。
  
- **下拉刷新 & 无限加载**  
  使用 `pullRefresh` + `LazyColumn` 实现流畅的下拉刷新；通过监听滚动位置触发分页加载。

- **删卡操作**  
  长按任意卡片弹出 `AlertDialog` 确认删除，确认后从列表中移除并同步至本地缓存。

- **多卡片样式支持**  
  - 纯文本卡片
  - 图文卡片（左图右文 / 上图下文）
  - 视频卡片（倒计时模拟自动播放）

- **混排布局控制**  
  每张卡片可独立指定排版：`SINGLE_COLUMN` 或 `DOUBLE_COLUMN`，通过 `LazyVerticalGrid` 与 `LazyColumn` 动态切换实现。

- **精准卡片曝光事件**  
  基于 `LazyListState` + 可视区域计算，当卡片 ≥50% 进入屏幕时触发 `onExposure(cardId)` 回调，可用于埋点或懒加载资源。

---

## 🚀 进阶功能

### 🔁 本地数据缓存
- 使用 **Room** 持久化 Feed 数据
- 网络请求失败时自动回退到本地缓存，保障离线可用性
- 缓存策略：仅保留最近的1页数据，避免存储膨胀

### ▶️ 视频卡片模拟播放
- 视频卡片进入可视区域 → 启动 10 秒倒计时（模拟“自动播放”）
- 卡片离开可视区域 → 暂停倒计时（模拟“停止播放”）
- 行为逻辑参考抖音搜索单列结果页

### 🧩 插件化支持卡片扩展
- 核心模块→ 负责管理视频卡片的状态，提供API供插件调用
- 插件接口→ 定义插件需要实现的方法
- 具体插件→ 实现插件接口，提供具体的业务逻辑

### 🛠️ 性能优化
- 图片预加载 提前将图片资源加载到缓存中，提升图片展示速度

---

## ☀️ 技术栈亮点

| 技术 | 用途 |
|------|------|
| **Jetpack Compose** | 声明式 UI，高效构建动态列表 |
| **suspend函数** | 挂起函数模拟网络请求 |
| **MVVM架构** | 分离业务逻辑与UI层 |
| **插件化扩展** | CardPlugin 接口和 PluginManager 实现卡片样式的动态扩展 |
| **图片预加载** | 基于 Coil 的高效缓存预加载机制 |

   


